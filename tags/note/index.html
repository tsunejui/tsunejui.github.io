<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Note - Rex&#39;s Notes 技術筆記 </title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	
	<link rel="alternate" type="application/rss+xml" href="/tags/note/index.xml" title="Rex's Notes 技術筆記 ">

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="Rex&#39;s Notes 技術筆記 " rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">Rex&#39;s Notes 技術筆記 </div>
					
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/posts/aboutme/">
				
				<span class="menu__text">About Me</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main list" role="main">
	<header class="main__header">
		<h1 class="main__title">Note</h1>
	</header><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/awx-install/" rel="bookmark">
			AWX Install (Container)
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		利用 dokcer 安裝 AWX
使用環境 Rocky Linux 8.7
安裝步驟 關閉 SELinux 建議暫時關閉 SELinux 避免安裝中出錯:
setenforce 0 安裝 docker https://docs.docker.com/engine/install/centos/
安裝 yum-utils:
yum install -y yum-utils 加入 repository:
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo 安裝 docker
yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin 啟動 docker
systemctl start docker 下載 AWX 17.1.0 安裝 git:
dnf install -y git Starting in version 18.0, the AWX Operator is the preferred way to install AWX.
https://github.com/ansible/awx/blob/devel/INSTALL.md
git clone -b 17.
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/samba-install/" rel="bookmark">
			Samba 安裝
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		使用環境 Rocky Linux 8.7
安裝步驟 透過 dnf 安裝 samba:
dnf install samba 設定 systemd 開機自動啟動:
systemctl enable smb.service 開啟防火牆
firewall-cmd --permanent --add-service=samba &amp;&amp; firewall-cmd --reload 設定 samba 新增Linux User: rex
useradd rex 新增 samba 帳號: rex
smbpasswd -a rex 新增目錄 /mnt/shared 並指派 owner 為 rex:
mkdir /mnt/shared &amp;&amp; chown rex -R /mnt/shared/ 編輯 vi /etc/samba/smb.conf, 並且加入以下內容:
設定參數請參考: https://www.samba.org/samba/docs/current/man-html/smb.conf.5.html
... [cnssmb] comment = CNS Samba Directory path = /mnt/shared public = yes create mask = 0777 directory mask = 0777 browseable = yes writeable = yes read only = no 設定 SELinux:
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/kafka-kraft-install/" rel="bookmark">
			Kafka 安裝 - Kraft Mode
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		事前準備 Preparation 準備 3 台 node:
os name ip Rocky Linux 8.8 cns-kafka-0 192.168.50.170 Rocky Linux 8.8 cns-kafka-1 192.168.50.171 Rocky Linux 8.8 cns-kafka-2 192.168.50.172 安裝步驟 設定 hosts (在每個 Node 上執行) 透過以下指令設定 /etc/hosts:
cat &lt;&lt; EOF &gt;&gt; /etc/hosts 192.168.50.170 cns-kafka-0 192.168.50.171 cns-kafka-1 192.168.50.172 cns-kafka-2 EOF 安裝 OpenJDK 11 (在每個 Node 上執行) To use Corretto RPM repositories with the yum package manager (such as Amazon Linux AMI), import the Corretto public key and then add the repository to the system list.
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/node-exporter/" rel="bookmark">
			Node Exporter
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		安裝 node exporter 監控 linux
使用環境 Rocky Linux 8.7
操作步驟 下載 binary 檔案 下載 node-exporter
curl -OL https://github.com/prometheus/node_exporter/releases/download/v1.6.0/node_exporter-1.6.0.linux-amd64.tar.gz 解壓縮 解壓縮 tar 檔案
tar -xzf node_exporter-1.6.0.linux-amd64.tar.gz 設定 Binary 位置及權限 新增資料夾
mkdir /etc/node_exporter 搬移檔案
mv node_exporter-1.6.0.linux-amd64/node_exporter /etc/node_exporter/node_exporter 賦予權限:
chmod +x /etc/node_exporter/node_exporter 建立 Service 檔案 vi node_exporter.service 填入以下內容
[Unit] Description=Node Exporter Wants=network-online.target After=network-online.target [Service] Type=simple ExecStart=/bin/bash -c &#39;/etc/node_exporter/node_exporter&#39; [Install] WantedBy=multi-user.target 搬移到 /etc/systemd/system/
cp node_exporter.service /etc/systemd/system/ systemd 設定 重啟 daemon
systemctl daemon-reload 設定開機自動啟動
systemctl enable node_exporter.
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/ssh-tunnel/" rel="bookmark">
			SSH Tunneling
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		What is SSH Tunneling SSH Tunneling is a method of creating an encrypted SSH connection between a client and a server machine through which services ports can be relayed, for example:
Pre-requisites Rocky Linux VM x 2 Install Grafana on one of them vm ip service port VM I (SSH Client) 10.250.75.103 VM II (SSH Server) 10.250.75.147 3000 (Grafana) 確保 /etc/ssh/sshd_config 內的 AllowTCPForwarding 為 yes Get Started 使用 ssh command 在 VM I:
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/rhel-9-panic/" rel="bookmark">
			RHEL 9 在 Proxmox 上 Kernel Panic
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		環境描述 使用 Proxmox 7.2-3:
問題原因 在 Proxmox 上安裝 RHEL 9 時會發生 Kernel Panic:
解決方法 在新增 VM 時，CPU type 選擇 host:
成功啟動 RHEL 9:
Reference https://access.redhat.com/discussions/6959360 
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/nfs-k8s/" rel="bookmark">
			NFS on Kubernetes
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		環境設定 項目 內容 NFS Server 10.250.75.111 NFS Path /mnt/nfs_shares 部署 NFS Storage Class 以下步驟將建立 Custom Provisioner，並串接 NFS Server。
建立 Provisioner 的 Service Account 請參考 here
建立名為 nfs-client-provisioner 的 Service Account
kubectl apply -f account.yaml 建立 Provisioner Deployment 請參考 here
kubernetes-sigs/nfs-subdir-external-provisioner: https://github.com/kubernetes-sigs/nfs-subdir-external-provisioner
為了避免出錯，strategy.type 設定為 Recreate，而 replicas 設為 1
使用 kubernetes-sigs/nfs-subdir-external-provisioner 作為 provisioner，請注意以下環境變數設定:
- name: PROVISIONER_NAME # storage class 名稱 value: k8s-sigs.io/nfs-subdir-external-provisioner - name: NFS_SERVER # nfs server 位置 value: 10.250.75.111 - name: NFS_PATH # nfs directory 路徑 value: /mnt/nfs_shares 使用 kubectl 部署 nfs-client-provisioner:
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/nfs/" rel="bookmark">
			NFS on Rocky Linux 8
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		什麼是 NFS NFS (Network File System) 是一種分散式檔案系統協議，用於在網路上共享檔案和資源。
環境設定 id name ip 1 nfs-server 10.250.75.111 2 nfs-client 10.250.75.103 在 NFS Server 上 安裝 nfs 工具包 dnf -y install nfs-utils 啟動 nfs server 並且設定開機自動開啟。 systemctl enable --now nfs-server.service 建立 nfs 目錄 mkdir -p /mnt/nfs_shares 更改 owner 及設定權限 nobody 使用者是一個系統使用者，不擁有任何特殊權限，且通常用於運行低權限的服務或進程。
chown -R nobody:nobody /mnt/nfs_shares &amp;&amp; chmod -R 777 /mnt/nfs_shares vim /etc/exports /etc/exports 是在 Linux 系統中用於配置 NFS 的設定檔案。NFS 是一種分散式檔案系統，它允許不同的機器透過網路共享檔案。
rw: 可讀可寫
sync: 寫入後同步
no_all_squash: 禁用 all_squash
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/proxmox-extend-linux-space/" rel="bookmark">
			Proxmox 增加 Linux 硬碟空間
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		當 Proxmox 上的 Linux 硬碟可用空間不足時, 可以透過以下方法增加空間。
使用環境 Rocky Linux 8.7
Proxmox 重新設定硬碟空間 進入 Proxmox 上 VM 的 Hardware, 編輯 Hard Disk:
增加硬碟空間:
透過 lsblk 可以看到, 硬碟 sda 容量有增加。
lsblk 調整 LVM 我們要調整 rl-root 的容量, 也就是 LV 的大小, 而調整 LV 需要先建立 PV, 再將 PV 加入與 LV 相同的 VG, 如下圖所示:
https://networklessons.com/uncategorized/extend-lvm-partition
在建立 PV 之前, 我們需要建立 partition, 透過 parted 指令可以輕鬆的達成:
parted 進入 parted 畫面後, 查看可用空間, 及 Start 和 End:
unit MB p free 建立 partition, 填入 Start 和 End:
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/rocky-xrdp/" rel="bookmark">
			Rocky Linux 使用 XRDP
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		使用環境 Rocky Linux 8.7
安裝 xrdp server 安裝 xrdp:
dnf install xrdp 啟動 server 啟動 xrdp server:
systemctl start xrdp 設定開機啟動:
systemctl enable xrdp 打開防火牆 預設 port 為 3389:
firewall-cmd --permanent --add-port=3389/tcp &amp;&amp; firewall-cmd --reload 測試 使用 Microsoft Remote Desktop 測試連線:
連線成功:
Reference https://linux.how2shout.com/how-to-connect-rocky-linux-8-via-windows-rdp-protocol/ 
	</div>
</article>
</main>

<div class="pagination">
	<span class="pagination__item pagination__item--current">1/2</span>
	<a class="pagination__item pagination__item--next btn" href="/tags/note/page/2/">»</a>
</div>

			</div>
			
<aside class="sidebar"><div class="widget-search widget">
	<form class="widget-search__form" role="search" method="get" action="https://google.com/search">
		<label>
			<input class="widget-search__field" type="search" placeholder="SEARCH…" value="" name="q" aria-label="SEARCH…">
		</label>
		<input class="widget-search__submit" type="submit" value="Search">
		<input type="hidden" name="sitesearch" value="https://tsunejui.github.io/">
	</form>
</div>
<div class="widget-recent widget">
	<h4 class="widget__title">Recent Posts</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/posts/awx-install/">AWX Install (Container)</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/samba-install/">Samba 安裝</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/kafka-kraft-install/">Kafka 安裝 - Kraft Mode</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/node-exporter/">Node Exporter</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/ssh-tunnel/">SSH Tunneling</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/rhel-9-panic/">RHEL 9 在 Proxmox 上 Kernel Panic</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/nfs-k8s/">NFS on Kubernetes</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/nfs/">NFS on Rocky Linux 8</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/proxmox-extend-linux-space/">Proxmox 增加 Linux 硬碟空間</a></li>
			<li class="widget__item"><a class="widget__link" href="/posts/rocky-xrdp/">Rocky Linux 使用 XRDP</a></li>
		</ul>
	</div>
</div>
<div class="widget-categories widget">
	<h4 class="widget__title">Categories</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item">
				<a class="widget__link" href="/categories/cicd/">CICD</a></li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/istio/">Istio</a></li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/k8s/">K8S</a></li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/kafka/">Kafka</a></li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/linux/">Linux</a></li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/profile/">Profile</a></li>
			<li class="widget__item">
				<a class="widget__link" href="/categories/sre/">SRE</a></li>
		</ul>
	</div>
</div>
<div class="widget-taglist widget">
	<h4 class="widget__title">Tags</h4>
	<div class="widget__content">
		<a class="widget-taglist__link widget__link btn" href="/tags/note/" title="Note">Note</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/tip/" title="Tip">Tip</a>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2023 Rex Wu.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>
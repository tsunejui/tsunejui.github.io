<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Openshift on Rex&#39;s Notes 技術筆記 </title>
    <link>https://tsunejui.github.io/categories/openshift/</link>
    <description>Recent content in Openshift on Rex&#39;s Notes 技術筆記 </description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 02 Nov 2023 15:20:48 +0800</lastBuildDate><atom:link href="https://tsunejui.github.io/categories/openshift/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>F5 VIP Setting</title>
      <link>https://tsunejui.github.io/posts/f5-vip-setting/</link>
      <pubDate>Thu, 02 Nov 2023 15:20:48 +0800</pubDate>
      
      <guid>https://tsunejui.github.io/posts/f5-vip-setting/</guid>
      <description>環境描述 客戶環境需要在 F5 設定 VIP，並分配流量到不同的主機，我需要在公司 Lab 上模擬，由於對 F5 的操作不熟悉，因此撰寫此篇文章作為紀錄 VIP 設定方法。
請注意，此篇文章是簡易的設定紀錄，我並非 F5 的專業人員，如果錯誤請見諒
F5 設定介面 到 Local Traffic / Pools / Pool List 頁面上新增 Pool:
設定 Name 及 Health Monitors 的方式 (下圖為新增後的編輯畫面):
到 Local Traffic / Virtual Servers / Virtual Servers List 頁面上新增 Virtual Server:
到 Properties 頁面上設定 General Properties 及憑證相關資料 (下圖為新增後的編輯畫面):
到 Resource 頁面上設定 Load Balancing (下圖為新增後的編輯畫面):
結果 設定完成後便立即生效，在 Local Traffic / Pools : Pool List / &amp;lt;pool-name&amp;gt; 上可以看到 Pool 內的 members 狀況:</description>
    </item>
    
    <item>
      <title>Dex Expiration Time on Openshift Gitops</title>
      <link>https://tsunejui.github.io/posts/openshift-gitops-dex-expiration-time/</link>
      <pubDate>Thu, 02 Nov 2023 00:13:03 +0800</pubDate>
      
      <guid>https://tsunejui.github.io/posts/openshift-gitops-dex-expiration-time/</guid>
      <description>環境描述 近期由於客戶需要導入 ArgoCD 管理 CRDs，因此在客戶的 Openshift 4.x 上安裝 GitOps Operator。安裝後發現了一個問題，ArgoCD 的 Web 介面需要約 24 小時後才會自動登出，客戶希望調整登出時間。
從上圖可得知，ArgoCD 的 web 介面上，會再登入後產生一把 token 並放到 cookie 內，名為 argocd.token，我們可以透過 jwt.io 解析這把 token，查看 expiration date:
在沒有做任何設定的情況下，透過 Openshift 帳密使用 SSO 登入機制進入 ArgoCD 畫面，所產生的 token 過期時間應該是 24h 後，這是因為 ArgoCD 在 SSO 認證上是交給 Dex Server 控制，而 Dex Server 的預設過期時間是 24h：
可以從 ArgoCD 的 Security 文章查看 Dex Server 的說明:
尋找方法 ArgoCD Operator 會透過 Kind: ArgoCD 的 CRD ，名為 openshift-gitops，產生需要的 components，如 server、applicationSet、grafana&amp;hellip;:</description>
    </item>
    
    <item>
      <title>NodeClockNotSynchronising alert troubleshooting in Openshift 4</title>
      <link>https://tsunejui.github.io/posts/node-clock-not-synchronising/</link>
      <pubDate>Sat, 26 Aug 2023 01:51:06 +0800</pubDate>
      
      <guid>https://tsunejui.github.io/posts/node-clock-not-synchronising/</guid>
      <description>事件經過 某日客戶收到來自 OCP 的 critical 告警，名稱為 NodeClockNotSynchronising，請我們調查原因。
告警訊息 首先調查告警意義，至 openshoft-monitoring Project 下尋找名為 prometheus-k8s-rulefiles-0 的 ConfigMap，便可看到以下內容
https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/NodeClockNotSynchronising.md
- alert: NodeClockNotSynchronising annotations: description: Clock on {{ $labels.instance }} is not synchronising. Ensure NTP is configured on this host. runbook_url: https://github.com/openshift/runbooks/blob/master/alerts/cluster-monitoring-operator/NodeClockNotSynchronising.md summary: Clock not synchronising. expr: | min_over_time(node_timex_sync_status{job=&amp;#34;node-exporter&amp;#34;}[5m]) == 0 and node_timex_maxerror_seconds{job=&amp;#34;node-exporter&amp;#34;} &amp;gt;= 16 for: 10m labels: severity: critical 根據官方文件，我們可以得知以下訊息:
The NodeClockNotSynchronising alert triggers when a node is affected by issues with the NTP server for that node.</description>
    </item>
    
  </channel>
</rss>
